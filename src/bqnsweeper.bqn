Grid â† {ğ•©â¥Š(â†•Ã—Â´ğ•©)âˆŠğ•¨â€¢rand.Deal Ã—Â´ğ•©}
Pad â† {0âˆ¾Ë˜â‰âŒ½ğ•©}âŸ4
Adjacent â† +Â´âˆ˜â¥Šâ‰2 3â€¿3â†•Pad
Spread â† {â‰âŒ½ğ•©âˆ¨Â»ğ•©}âŸ4
Flood â† âˆ§âŸœSpreadâŸ{+Â´â‰¢ğ•©}
Neighborsâ†<â‰2 3â€¿3â†•âŠ¢

Game â† {count ğ•Š size:
  repr â† ".x 12345678ff"
  mines â† count Grid size
  adj â† Adjacent mines
  seen â† sizeâ¥Š0
  flags â† sizeâ¥Š0
  Clamp â† sizeâŠ¸{hâ€¿w ğ•Š yâ€¿x: âŸ¨(h-1)(0âŒˆâŒŠ)y, (w-1)(0âŒˆâŒŠ)xâŸ©}
  Guess â‡ {
    g â† 1âŒ¾(ğ•©âŠ¸âŠ‘)sizeâ¥Š0
    seen âˆ¨â†©(0=adj)Spreadâˆ˜FloodâŸ(0=+Â´â¥ŠgÃ—adj) gÃ—Â¬flags
    flags Ã—â†©Â¬seen
  }
  Render  â‡ {ğ•Š: âŠ‘âŸœreprâŠ'/'Â¨(flagsÃ—2-Ëœâ‰ repr)+seenÃ—seen+(Â¬mines)Ã—1+adj}
  Result  â‡ {ğ•Š: (seenâ‰¡Â¬mines) - âˆ¨Â´â¥Šseenâˆ§mines}
  Flag    â‡ {flags Â¬âŒ¾(ğ•©âŠ¸âŠ‘)âŸ(0=âŠ‘âŸœseen ğ•©)â†©}
  Chord   â‡ {
    pâ†ğ•©âŠ‘adjÃ—seen
    Validâ†{(Ã—p) âˆ§ p=+Â´+Ëğ•©âŠ‘Neighbors Pad flags}
    ChordCoordsâ†â¥ŠÂ·âˆ¾âŒœÂ´((â†•3)+1-ËœâŠ¢)Â¨
    (Guessâˆ˜ClampÂ¨ChordCoords)âŸValid ğ•©
  }
  ShowAll â‡ {ğ•Š: seenâˆ¨â†©1}
}
